

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>backtesting_trade_executor &mdash; ctxalgoctp 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ctxalgoctp 0.1 documentation" href="../../index.html"/>
        <link rel="up" title="trade_executors" href="index.html"/>
        <link rel="next" title="logger" href="../logger/index.html"/>
        <link rel="prev" title="trade_request_response_utils" href="trade_request_response_utils.html"/> 

  
  <script src="../../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../../index.html" class="icon icon-home"> ctxalgoctp
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">ctp</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../live/index.html">live</a></li>
<li class="toctree-l2"><a class="reference internal" href="../factories/index.html">factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../context_loaders/index.html">context_loaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_gen/index.html">code_gen</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">trade_executors</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="abstract_trade_executor.html">abstract_trade_executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="ctp_trade_executor.html">ctp_trade_executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="position_recovery.html">position_recovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="twap.html">twap</a></li>
<li class="toctree-l3"><a class="reference internal" href="zmq_trade_execution_server.html">zmq_trade_execution_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="zmq_trade_executor.html">zmq_trade_executor</a></li>
<li class="toctree-l3"><a class="reference internal" href="trade_request_response_utils.html">trade_request_response_utils</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">backtesting_trade_executor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logger/index.html">logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../execution_drivers/index.html">execution_drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stress_testing/index.html">stress_testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_producers/index.html">data_producers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../strategies/index.html">strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dominant_providers/index.html">dominant_providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trading_account_loaders/index.html">trading_account_loaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../slippage_models.html">slippage_models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../strategy_utils.html">strategy_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exchanges.html">exchanges</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtester.html">backtester</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trading_account.html">trading_account</a></li>
<li class="toctree-l2"><a class="reference internal" href="../strategy_command_line_utils.html">strategy_command_line_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../report_pdf_generator.html">report_pdf_generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../position_utils.html">position_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimization.html">optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline_optimization.html">offline_optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tick_and_bar_publisher.html">tick_and_bar_publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../market_data_feed.html">market_data_feed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../base.html">base</a></li>
<li class="toctree-l2"><a class="reference internal" href="../order_cancellation.html">order_cancellation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../roll.html">roll</a></li>
<li class="toctree-l2"><a class="reference internal" href="../state_utils.html">state_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../constants.html">constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../datetime_utils.html">datetime_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../market_periods_utils.html">market_periods_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../strategy.html">strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../callback_base.html">callback_base</a></li>
<li class="toctree-l2"><a class="reference internal" href="../market_order_simulator.html">market_order_simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plain_backtester.html">plain_backtester</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic_utils.html">basic_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../live_strategy_utils.html">live_strategy_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backtesting_utils.html">backtesting_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../comm.html">comm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../report_generator.html">report_generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html">utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../future_info_provider.html">future_info_provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trading_constants.html">trading_constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../report.html">report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../position_rebalancer.html">position_rebalancer</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ctxalgoctp</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">ctp</a> &raquo;</li>
      
          <li><a href="index.html">trade_executors</a> &raquo;</li>
      
    <li>backtesting_trade_executor</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../sources/ctp/trade_executors/backtesting_trade_executor.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-ctxalgoctp.ctp.trade_executors.backtesting_trade_executor">
<span id="backtesting-trade-executor"></span><h1>backtesting_trade_executor<a class="headerlink" href="#module-ctxalgoctp.ctp.trade_executors.backtesting_trade_executor" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes">
<em class="property">class </em><code class="descclassname">ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.</code><code class="descname">MaxTradableVolumes</code><span class="sig-paren">(</span><em>now</em>, <em>traded_price</em>, <em>traded_volume</em>, <em>order_book</em>, <em>slippage_model</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes" title="Permalink to this definition">¶</a></dt>
<dd><p>Class that represents max tradable volumes that can be used for order execution.
It keeps three kinds of volumes, traded volume, ask volume and bid volume.
Traded volume is the volume that we observed traded. Ask volume and bid volume is only available
when order book data is present (in tick level backtesting). They represents the ask and bid volume.</p>
<p>Initialize current.
:param now: datetime, current timestamp.
:param traded_price: float, the last known price for a particular contract.
:param traded_volume: int, the last known traded volume for a particular contract.
:param order_book: dict{string: object}, order book. If None, no order book is available.
:param slippage_model: AbstractSlippageModel, slippage model.</p>
<dl class="attribute">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes.CHANGE_TRADED_VOLUME">
<code class="descname">CHANGE_TRADED_VOLUME</code><em class="property"> = 0</em><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes.CHANGE_TRADED_VOLUME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes.CHANGE_ASK_VOLUME">
<code class="descname">CHANGE_ASK_VOLUME</code><em class="property"> = 1</em><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes.CHANGE_ASK_VOLUME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes.CHANGE_BID_VOLUME">
<code class="descname">CHANGE_BID_VOLUME</code><em class="property"> = 2</em><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes.CHANGE_BID_VOLUME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes.has_volume_left">
<code class="descname">has_volume_left</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes.has_volume_left" title="Permalink to this definition">¶</a></dt>
<dd><p>Is there any tradable volume that can be used to execute pending orders?
:return: bool.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>delta</em>, <em>volume_change_category</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.MaxTradableVolumes.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Change tradable volumes.
:param delta:
:param volume_change_category: int, the volume category to change.</p>
<blockquote>
<div>Valid value must be in self.valid_volume_change_categories.</div></blockquote>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.Order">
<em class="property">class </em><code class="descclassname">ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.</code><code class="descname">Order</code><span class="sig-paren">(</span><em>id_</em>, <em>future_id</em>, <em>actual_future_id</em>, <em>is_open</em>, <em>price</em>, <em>traded_volume</em>, <em>left_volume</em>, <em>order_ref</em>, <em>timestamp</em>, <em>reason</em>, <em>kind</em>, <em>canceled</em>, <em>offset_flag</em>, <em>order_sys_id</em>, <em>request_id</em>, <em>exchange</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.Order" title="Permalink to this definition">¶</a></dt>
<dd><p>Class that represent an order.</p>
<p>Initialize current.
:param <a href="#id1"><span class="problematic" id="id2">id_</span></a>: int, id of the order, will be increasing in the same trading day.</p>
<blockquote>
<div>Used for decide which order is first placed.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>future_id</strong> &#8211; string, future id.</li>
<li><strong>is_open</strong> &#8211; boolean, True if the order is to open a position. False to close a position.</li>
<li><strong>price</strong> &#8211; float, the price of the order.</li>
<li><strong>traded_volume</strong> &#8211; int, the volume in the order that has been traded.</li>
<li><strong>left_volume</strong> &#8211; int, the volume that is to be traded.</li>
<li><strong>order_ref</strong> &#8211; int, order reference.</li>
<li><strong>timestamp</strong> &#8211; datetime, time stamp when the order is placed.</li>
<li><strong>reason</strong> &#8211; string, reason for placing the order.</li>
<li><strong>kind</strong> &#8211; OrderKind, kind of the order, such as Market, NormalLimit, FAK, FOK.</li>
<li><strong>canceled</strong> &#8211; boolean, True means that current order has been canceled.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.Order.is_open_long">
<code class="descname">is_open_long</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.Order.is_open_long" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.Order.is_open_short">
<code class="descname">is_open_short</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.Order.is_open_short" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.Order.is_close_long">
<code class="descname">is_close_long</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.Order.is_close_long" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.Order.is_close_short">
<code class="descname">is_close_short</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.Order.is_close_short" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor">
<em class="property">class </em><code class="descclassname">ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.</code><code class="descname">BacktestingTradeExecutor</code><span class="sig-paren">(</span><em>backtester</em>, <em>future_info_factory</em>, <em>sanity_check=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="abstract_trade_executor.html#ctxalgoctp.ctp.trade_executors.abstract_trade_executor.AbstractTradeExecutor" title="ctxalgoctp.ctp.trade_executors.abstract_trade_executor.AbstractTradeExecutor"><code class="xref py py-class docutils literal"><span class="pre">ctxalgoctp.ctp.trade_executors.abstract_trade_executor.AbstractTradeExecutor</span></code></a>, <a class="reference internal" href="../data_producers/backtesting_data_producer.html#ctxalgoctp.ctp.data_producers.backtesting_data_producer.CtpBacktestingUtils" title="ctxalgoctp.ctp.data_producers.backtesting_data_producer.CtpBacktestingUtils"><code class="xref py py-class docutils literal"><span class="pre">ctxalgoctp.ctp.data_producers.backtesting_data_producer.CtpBacktestingUtils</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>backtester</strong> &#8211; CtpBacktester, the backtester.</li>
<li><strong>future_info_factory</strong> &#8211; </li>
<li><strong>sanity_check</strong> &#8211; bool, if True, perform sanity check on backtester money and strategy money.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_trading_account_id">
<code class="descname">get_trading_account_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_trading_account_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_broker_id">
<code class="descname">get_broker_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_broker_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.prepare_trade_executor">
<code class="descname">prepare_trade_executor</code><span class="sig-paren">(</span><em>message_queue</em>, <em>local_path</em>, <em>logger</em>, <em>factory</em>, <em>dt</em>, <em>product_name</em>, <em>strategy_name</em>, <em>strategy_uuid</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.prepare_trade_executor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.setup_event_actions">
<code class="descname">setup_event_actions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.setup_event_actions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.add_price">
<code class="descname">add_price</code><span class="sig-paren">(</span><em>future_id</em>, <em>price</em>, <em>volume</em>, <em>high</em>, <em>low</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.add_price" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.connect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.disconnect">
<code class="descname">disconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.disconnect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.release">
<code class="descname">release</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.release" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.dispose">
<code class="descname">dispose</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.dispose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.cancel_order">
<code class="descname">cancel_order</code><span class="sig-paren">(</span><em>order</em>, <em>exchange=None</em>, <em>order_sys_id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.cancel_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_investor_position">
<code class="descname">get_investor_position</code><span class="sig-paren">(</span><em>future_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_investor_position" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_investor_position_detail">
<code class="descname">get_investor_position_detail</code><span class="sig-paren">(</span><em>future_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_investor_position_detail" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_order">
<code class="descname">get_order</code><span class="sig-paren">(</span><em>instrument_id=''</em>, <em>exchange_id=''</em>, <em>order_sys_id=''</em>, <em>insert_time_start=''</em>, <em>insert_time_end=''</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_trade">
<code class="descname">get_trade</code><span class="sig-paren">(</span><em>future_id=''</em>, <em>exchange_id=''</em>, <em>trade_id=''</em>, <em>trade_time_start=''</em>, <em>trade_time_end=''</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_trade" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_trading_account">
<code class="descname">get_trading_account</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_trading_account" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_instrument">
<code class="descname">get_instrument</code><span class="sig-paren">(</span><em>future_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_instrument" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_commission_rate">
<code class="descname">get_commission_rate</code><span class="sig-paren">(</span><em>future_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_commission_rate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_margin_rate">
<code class="descname">get_margin_rate</code><span class="sig-paren">(</span><em>future_id</em>, <em>hedge_flag</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_margin_rate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_order_commission_rate">
<code class="descname">get_order_commission_rate</code><span class="sig-paren">(</span><em>future_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_order_commission_rate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_deep_market_data">
<code class="descname">get_deep_market_data</code><span class="sig-paren">(</span><em>future_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.get_deep_market_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.start_strategy">
<code class="descname">start_strategy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.start_strategy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.report_exception">
<code class="descname">report_exception</code><span class="sig-paren">(</span><em>e</em>, <em>trace</em>, <em>action=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.report_exception" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.open_market_order">
<code class="descname">open_market_order</code><span class="sig-paren">(</span><em>exchange_id</em>, <em>instrument_id</em>, <em>actual_instrument_id</em>, <em>volume</em>, <em>source_order_ref</em>, <em>kind='Market'</em>, <em>order_ref=-1</em>, <em>reason=''</em>, <em>offset_flag=c_char('0')</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.open_market_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.close_market_order">
<code class="descname">close_market_order</code><span class="sig-paren">(</span><em>exchange_id</em>, <em>instrument_id</em>, <em>actual_instrument_id</em>, <em>volume</em>, <em>source_order_ref</em>, <em>kind='Market'</em>, <em>order_ref=-1</em>, <em>reason=''</em>, <em>offset_flag=c_char('1')</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.close_market_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.open_limit_order">
<code class="descname">open_limit_order</code><span class="sig-paren">(</span><em>exchange_id</em>, <em>instrument_id</em>, <em>actual_instrument_id</em>, <em>price</em>, <em>volume</em>, <em>source_order_ref</em>, <em>kind='Normal'</em>, <em>order_ref=-1</em>, <em>reason=''</em>, <em>offset_flag=c_char('0')</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.open_limit_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.close_limit_order">
<code class="descname">close_limit_order</code><span class="sig-paren">(</span><em>exchange_id</em>, <em>instrument_id</em>, <em>actual_instrument_id</em>, <em>price</em>, <em>volume</em>, <em>source_order_ref</em>, <em>kind='Normal'</em>, <em>order_ref=-1</em>, <em>reason=''</em>, <em>offset_flag=c_char('1')</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.close_limit_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.enough_position_for_close">
<code class="descname">enough_position_for_close</code><span class="sig-paren">(</span><em>account</em>, <em>instrument_id</em>, <em>volume</em>, <em>trading_day</em>, <em>only_today</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.enough_position_for_close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.update_trading_account">
<code class="descname">update_trading_account</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.update_trading_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Update trading account.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.check_all_pending_orders">
<code class="descname">check_all_pending_orders</code><span class="sig-paren">(</span><em>now</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.check_all_pending_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Check all pending orders to see if some of them can be executed.
:param now: datetime, current time stamp.
:return:</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.check_pending_orders">
<code class="descname">check_pending_orders</code><span class="sig-paren">(</span><em>instrument_id</em>, <em>market_price</em>, <em>market_volume</em>, <em>now</em>, <em>is_eager=False</em>, <em>open_price=None</em>, <em>high_price=None</em>, <em>low_price=None</em>, <em>close_price=None</em>, <em>order_book=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.check_pending_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if some of the pending orders can be executed based on the current ohlc bar.
The parameters open_price, high_price, low_price and close_price are used for limit order simulation.
:param market_price: float, the current price, from the trades in historical data.
:param market_volume: int, the current volume, from the trades in historical data.
:param now: datetime, current time stamp.
:param is_eager: boolean.
:param open_price: float, the open price of current bar, if available.
:param high_price: float, the high price of current bar, if available.
:param low_price: float, the low price of current bar, if available.
:param close_price: float, the close price of current bar, if available.
:param order_book: dict{string: object}, current order book (tick) information.</p>
<blockquote>
<div>Only when backtesting with tick data, order_book has value, otherwise, it is None.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.backtesting_process_message">
<code class="descname">backtesting_process_message</code><span class="sig-paren">(</span><em>now</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.backtesting_process_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Process message. Only used by backtester.
:param now: datetime, current timestamp.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.subscriber_socket">
<code class="descname">subscriber_socket</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.subscriber_socket" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.cancel_external_order">
<code class="descname">cancel_external_order</code><span class="sig-paren">(</span><em>instrument_id</em>, <em>order_ref_id</em>, <em>front_id</em>, <em>session_id</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.cancel_external_order" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.register_response">
<code class="descname">register_response</code><span class="sig-paren">(</span><em>kind</em>, <em>data</em>, <em>delay_start=0</em>, <em>delay_end=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.register_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a response handler into the response queue.
:param kind: string, the name of the response callback.
:param data: dict from string to object, the data.
:param delay_start: int,
:param delay_end: int, delay_start and delay_end defines the time range (both inclusive) in milliseconds,</p>
<blockquote>
<div>in which the response should occur.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.set_message_random_delay_enabled">
<code class="descname">set_message_random_delay_enabled</code><span class="sig-paren">(</span><em>enabled</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.set_message_random_delay_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Set self.message_random_delay_enabled to enabled.
:param enabled: bool, the value.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.subscribe_bars">
<code class="descname">subscribe_bars</code><span class="sig-paren">(</span><em>topics</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.subscribe_bars" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.subscribe_ticks">
<code class="descname">subscribe_ticks</code><span class="sig-paren">(</span><em>topics</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.subscribe_ticks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.cancel_external_orders">
<code class="descname">cancel_external_orders</code><span class="sig-paren">(</span><em>orders</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.trade_executors.backtesting_trade_executor.BacktestingTradeExecutor.cancel_external_orders" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../logger/index.html" class="btn btn-neutral float-right" title="logger" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="trade_request_response_utils.html" class="btn btn-neutral" title="trade_request_response_utils" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, .
      Last updated on Jul 18, 2017.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../static/jquery.js"></script>
      <script type="text/javascript" src="../../static/underscore.js"></script>
      <script type="text/javascript" src="../../static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>