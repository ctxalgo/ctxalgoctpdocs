

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>order_cancellation &mdash; ctxalgoctp 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ctxalgoctp 0.1 documentation" href="../index.html"/>
        <link rel="up" title="ctp" href="index.html"/>
        <link rel="next" title="roll" href="roll.html"/>
        <link rel="prev" title="base" href="base.html"/> 

  
  <script src="../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> ctxalgoctp
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ctp</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="live/index.html">live</a></li>
<li class="toctree-l2"><a class="reference internal" href="factories/index.html">factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="context_loaders/index.html">context_loaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_gen/index.html">code_gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="trade_executors/index.html">trade_executors</a></li>
<li class="toctree-l2"><a class="reference internal" href="logger/index.html">logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution_drivers/index.html">execution_drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_producers/index.html">data_producers</a></li>
<li class="toctree-l2"><a class="reference internal" href="strategies/index.html">strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading_account_loaders/index.html">trading_account_loaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="slippage_models.html">slippage_models</a></li>
<li class="toctree-l2"><a class="reference internal" href="strategy_utils.html">strategy_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="exchanges.html">exchanges</a></li>
<li class="toctree-l2"><a class="reference internal" href="backtester.html">backtester</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading_account.html">trading_account</a></li>
<li class="toctree-l2"><a class="reference internal" href="strategy_command_line_utils.html">strategy_command_line_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="report_pdf_generator.html">report_pdf_generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization.html">optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="offline_optimization.html">offline_optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="tick_and_bar_publisher.html">tick_and_bar_publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="market_data_feed.html">market_data_feed</a></li>
<li class="toctree-l2"><a class="reference internal" href="base.html">base</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">order_cancellation</a></li>
<li class="toctree-l2"><a class="reference internal" href="roll.html">roll</a></li>
<li class="toctree-l2"><a class="reference internal" href="state_utils.html">state_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="constants.html">constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="dominant_provider.html">dominant_provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="datetime_utils.html">datetime_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="strategy.html">strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="callback_base.html">callback_base</a></li>
<li class="toctree-l2"><a class="reference internal" href="market_order_simulator.html">market_order_simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="plain_backtester.html">plain_backtester</a></li>
<li class="toctree-l2"><a class="reference internal" href="live_strategy_utils.html">live_strategy_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="backtesting_utils.html">backtesting_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="comm.html">comm</a></li>
<li class="toctree-l2"><a class="reference internal" href="report_generator.html">report_generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="future_info_provider.html">future_info_provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading_constants.html">trading_constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="report.html">report</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ctxalgoctp</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">ctp</a> &raquo;</li>
      
    <li>order_cancellation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../sources/ctp/order_cancellation.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-ctxalgoctp.ctp.order_cancellation">
<span id="order-cancellation"></span><h1>order_cancellation<a class="headerlink" href="#module-ctxalgoctp.ctp.order_cancellation" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation">
<em class="property">class </em><code class="descclassname">ctxalgoctp.ctp.order_cancellation.</code><code class="descname">AbstractOrderCancellation</code><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup current order cancellation. Should be invoked by the strategy.
:param data: dict{string: object}, the data used to setup current cancellation.</p>
<blockquote>
<div>Different cancellation policy requires different data, check the comment
of the descendant class.</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation.cancel_when_needed">
<code class="descname">cancel_when_needed</code><span class="sig-paren">(</span><em>strategy</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation.cancel_when_needed" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel the remaining part of the order specified in current class when necessary.
:param strategy: AbstractStrategy. The strategy from which orders are placed and canceled.
:param data: dict{string: object}, some arbitrary data, used by current class to decide</p>
<blockquote>
<div>if cancel should happen. Different cancellation policy will use different kinds of data,
check the comment of the same method in descendant classes.</div></blockquote>
<p>:return bool, True if a cancellation is happened. False otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation.is_time_based">
<code class="descname">is_time_based</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation.is_time_based" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation.is_bar_based">
<code class="descname">is_bar_based</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation.is_bar_based" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ctxalgoctp.ctp.order_cancellation.TimeBasedOrderCancellation">
<em class="property">class </em><code class="descclassname">ctxalgoctp.ctp.order_cancellation.</code><code class="descname">TimeBasedOrderCancellation</code><span class="sig-paren">(</span><em>duration</em>, <em>reason=''</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.TimeBasedOrderCancellation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation" title="ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation"><code class="xref py py-class docutils literal"><span class="pre">ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation</span></code></a></p>
<p>Class that represents order cancellation that is based on time. This means that
if an order has not been fully executed in a given period of time, the pending
part of the order will be canceled.</p>
<dl class="docutils">
<dt>Note: about the timing of cancellation, see the comment for</dt>
<dd>the milliseconds parameter in the __init__ method.</dd>
</dl>
<p>Initialize current.
:param duration: int, the time in second to wait for the order to execute.</p>
<blockquote>
<div>or type is timedelta.
After this second period of time, the pending part of the order will be canceled.
This means if after now + timedelta(milliseconds=milliseconds), if the order given by
order_ref has not been fully executed, the remaining part will be canceled.
About the timing for cancellation: the strategy will make sure the cancellation will not happen
before now + timedelta(milliseconds=milliseconds), but it does not guarantee that the
cancellation will happen exactly at now + timedelta(milliseconds=milliseconds). The actual
cancellation timing maybe some time slightly after that.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>reason</strong> &#8211; string, the reason to cancel the order.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.TimeBasedOrderCancellation.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.TimeBasedOrderCancellation.setup" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> &#8211; dict{string: object}, the data used to setup current cancellation. Required entries are:
&#8216;order_ref&#8217;: string, the full order reference.
&#8216;order_start_time&#8217;: datetime, the timestamp when the order is placed.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.TimeBasedOrderCancellation.cancel_when_needed">
<code class="descname">cancel_when_needed</code><span class="sig-paren">(</span><em>strategy</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.TimeBasedOrderCancellation.cancel_when_needed" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> &#8211; dict{string: object}, the data that is used by current cancellation policy
to decide whether an order cancellation should happen.
data should contain the following information:
&#8216;timestamp&#8217;: datetime, the current timestamp.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.TimeBasedOrderCancellation.is_time_based">
<code class="descname">is_time_based</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.TimeBasedOrderCancellation.is_time_based" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.TimeBasedOrderCancellation.is_bar_based">
<code class="descname">is_bar_based</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.TimeBasedOrderCancellation.is_bar_based" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ctxalgoctp.ctp.order_cancellation.BarBasedOrderCancellation">
<em class="property">class </em><code class="descclassname">ctxalgoctp.ctp.order_cancellation.</code><code class="descname">BarBasedOrderCancellation</code><span class="sig-paren">(</span><em>ohlc_kind='time-based'</em>, <em>period=None</em>, <em>bar_count=1</em>, <em>reason=''</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.BarBasedOrderCancellation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation" title="ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation"><code class="xref py py-class docutils literal"><span class="pre">ctxalgoctp.ctp.order_cancellation.AbstractOrderCancellation</span></code></a></p>
<p>Bar-based order cancellation. The idea is that after placing an order, if when the next one or more ohlc bar
with certain periodicity arrive and the order has not been fully executed, the remaining of the order
is cancelled.</p>
<p>Initialize current.
:param ohlc_kind: string, the ohlc bar kind, valid values are &#8216;time-based&#8217;, &#8216;volatility-based&#8217; from</p>
<blockquote>
<div>OhlcGeneratorConstants.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>period</strong> &#8211; Periodicity or int/float, if ohlc_kind is time-based, the period of the ohlc bars
of the traded instrument that current will be waiting for. If None, the default period of
the strategy will be used. If ohlc_kind is volatility-based, the volatility thresholds.
Cannot be None in this case.</li>
<li><strong>bar_count</strong> &#8211; int, the number of bars to wait for. If bar_count=1, when the next bar of
given period on the traded instrument arrives, the order will be cancelled (if it is not fully
traded yet). If bar_count=x, when the next x bar arrives, the order will be cancelled.</li>
<li><strong>reason</strong> &#8211; string, the reason for cancelling the order.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.BarBasedOrderCancellation.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.BarBasedOrderCancellation.setup" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> &#8211; dict{string: object}, the data that is used by current cancellation policy
to decide whether an order cancellation should happen.
data should contain the following information:
&#8216;instrument_id&#8217;: string, the instrument that is traded.
&#8216;order_ref&#8217;: string, the reference of the order.
&#8216;strategy&#8217;: AbstractStrategy, the strategy itself.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.BarBasedOrderCancellation.cancel_when_needed">
<code class="descname">cancel_when_needed</code><span class="sig-paren">(</span><em>strategy</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.BarBasedOrderCancellation.cancel_when_needed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.BarBasedOrderCancellation.is_time_based">
<code class="descname">is_time_based</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.BarBasedOrderCancellation.is_time_based" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctxalgoctp.ctp.order_cancellation.BarBasedOrderCancellation.is_bar_based">
<code class="descname">is_bar_based</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ctxalgoctp.ctp.order_cancellation.BarBasedOrderCancellation.is_bar_based" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="roll.html" class="btn btn-neutral float-right" title="roll" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="base.html" class="btn btn-neutral" title="base" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, .
      Last updated on Sep 28, 2016.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../static/jquery.js"></script>
      <script type="text/javascript" src="../static/underscore.js"></script>
      <script type="text/javascript" src="../static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>